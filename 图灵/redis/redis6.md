redis 6.0之前，命令的读取、解析、执行、回写客户端这一系列操作都是单线程执行的，但是一些后台任务，如持久化、过期数据删除、大key删除都是多线程执行的。
![[Pasted image 20220815213650.png]]

为什么6.0之前不用多线程？因为在redis事件模型和io多路复用下，cpu不是瓶颈，单机每秒已经经能处理10w命令。如果引入多线程，为了处理多线程下引入的问题，要进行加锁等操作，反而会降低性能。

为什么6.0引入多线程？redis单机最大性能是10w，如果业务场景超过了10w，还是需要引入多线程提升性能。redis性能瓶颈在网络io和内存io上，使用多线程来分摊网络io读写压力；操作内存还是单线程，所以不存在线程安全问题。默认不开启多线程



2、没变化的数据缓存在客户端，避免频繁与redis交互
